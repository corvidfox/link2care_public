---
title: "Determining the Relationship Between Mental Health Disorders and Wrongful Convictions Among Unhoused Individuals"
date: "2022-08-30 <br> Updated: `r Sys.Date()`"
---

# ‚≠êÔ∏èOverview

2022-08-06: Received abstract proposal from Michael. The proposal is in:  /Users/bradcannell/Library/CloudStorage/OneDrive-TheUniversityofTexasHealthScienceCenteratHouston/01_research/L2C Teams/link2care_public/one_offs/Nstanley_Abstract_Proposal_1_80322.docx


# üì¶Load packages

```{r message=FALSE}
library(dplyr, warn.conflicts = FALSE)
library(haven)
library(freqtables)
```


# üì•Import data 

This data was created in data_survey_31_update_all_data.Rmd

```{r}
l2c <- readr::read_rds("../../Participant Data/R data/combined_participant_data.rds")
dim(l2c) # 1285 1205
```


# üößData management

Keep baseline data only

```{r}
l2c_v1 <- filter(l2c, visit == 1)
dim(l2c_v1) # 360 1205
```

Independent variables: 

Mental health disorder (The Brief Homelessness Questionnaire; question 9 & Self-Rated Health Questionnaire; questions 20, 21, 22, & 23)

* bh_9: Are you currently receiving treatment for mental health problems (For example: Depression, Bipolar Disorder, Anxiety)?

* srh_19: Have you ever been diagnosed with Depression?

* srh_20: Have you ever been diagnosed with Schizophrenia or Schizoaffective disorder?

* srh_21: Have you ever been diagnosed with Bipolar disorder?

* srh_22: Have you ever been diagnosed with Post Traumatic Stress Disorder (PTSD)?

* srh_23: Have you ever been diagnosed with an Anxiety Disorder besides PTSD? (examples: Panic Disorder, Generalized Anxiety Disorder, Obsessive Compulsive Disorder)

Dependent variables: 

Self reports of wrongful conviction (The Brief Homelessness Questionnaire; questions 15)

* bh_26: Have you ever been convicted of a crime that you did not commit?

Potential Covariates: 

* Education: dem_edu_20_cat
* Sex: ml_gender
* Age: ml_race
* Race: ml_race
* Ethnicity: ml_hispanic

```{r}
l2c_v1_analysis <- l2c_v1 %>% 
  select(id, group, bh_9, bh_26, srh_19:srh_23, ml_gender, ml_race, ml_hispanic, ml_age, dem_edu_20_cat)

dim(l2c_v1_analysis) # 360  14
```

## üßÆRecode/calculate variables

* Coerce race and gender to factors
* Collapse education categories, coerce to factor
* Coerce independent and dependent vars to factors

```{r}
l2c_v1_analysis %>% 
  mutate(
    # Gender
    gender_f = factor(ml_gender, c("M", "F", "Other"), c("Male", "Female", "Other")),
    # Race/ethnicity
    race_3cat = case_when(
      is.na(ml_race)  ~ NA_character_,
      ml_race == "AA" ~ "Black or African American",
      ml_race == "W"  ~ "White",
      TRUE         ~ "Other"
    ),
    race_3cat_f = factor(
      race_3cat,
      c("Black or African American", "White", "Other")
    ),
    hispanic_f = factor(ml_hispanic, c("N", "Y"), c("Non-Hispanic", "Hispanic")),
    race_4cat = case_when(
      is.na(hispanic_f) ~ NA_integer_, # Missing - can't determine Hispanic ethnicity
      hispanic_f == "Hispanic" ~ 3L, # Hispanic, any race
      is.na(race_3cat_f) ~ NA_integer_, # Missing - We know non-Hispanic, but not race
      race_3cat_f == "White" ~ 1L, # White, non-Hispanic
      race_3cat_f == "Black or African American" ~ 2L, # Black, non-Hispanic
      race_3cat_f == "Other" ~ 4L # Other race, non-Hispanic
    ),
    race_4cat_f = factor(
      race_4cat,
      c(1L:4L),
      c("White, non-Hispanic", "Black, non-Hispanic", "Hispanic, any race", "Other race, non-Hispanic")
    ),
    # Education
    edu_4cat = case_when(
      dem_edu_20_cat < 12 ~ 1L, # Less than HS
      dem_edu_20_cat == 12 ~ 2L, # HS or GED
      dem_edu_20_cat < 16 ~ 3L, # HS grad, no Bachelors
      dem_edu_20_cat <= 20 ~ 4L # Bachelors or higher
    ),
    edu_4cat_f = factor(
      edu_4cat,
      c(1L:4L),
      c("Less than HS", "HS or GED", "HS grad, no Bachelors", "Bachelors or higher")
    )
  )
```

```{r}
freq_table(l2c_v1_analysis, dem_edu_20_cat)
```


# Left off here. 2022-08-30

Just finished education. Need to coerce the independent and dependent vars to factors.


# üìàAnalysis

```{r}

```


# üóëClean up

```{r}
rm(list = ls())
```

```{r echo=FALSE}
sessionInfo()
```
